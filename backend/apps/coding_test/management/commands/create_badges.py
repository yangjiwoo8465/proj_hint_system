"""
ë°°ì§€ ì´ˆê¸° ë°ì´í„° ìƒì„± ì»¤ë§¨ë“œ
python manage.py create_badges
"""
from django.core.management.base import BaseCommand
from apps.coding_test.models import Badge


class Command(BaseCommand):
    help = 'ë°°ì§€ ì´ˆê¸° ë°ì´í„° ìƒì„±'

    def handle(self, *args, **options):
        badges_data = [
            # ê¸°ì¡´ ë°°ì§€
            ('first_problem', 'ì²« ë¬¸ì œ í•´ê²°', 'ì²« ë²ˆì§¸ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤!', 'ğŸ¯'),
            ('problem_streak_7', '7ì¼ ì—°ì†', '7ì¼ ì—°ì† ë¬¸ì œë¥¼ í’€ì—ˆìŠµë‹ˆë‹¤', 'ğŸ”¥'),
            ('problem_streak_30', '30ì¼ ì—°ì†', '30ì¼ ì—°ì† ë¬¸ì œë¥¼ í’€ì—ˆìŠµë‹ˆë‹¤', 'âš¡'),
            ('problems_10', '10ë¬¸ì œ ë‹¬ì„±', 'ë¬¸ì œ 10ê°œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤', 'ğŸŒŸ'),
            ('problems_50', '50ë¬¸ì œ ë‹¬ì„±', 'ë¬¸ì œ 50ê°œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤', 'ğŸ’«'),
            ('problems_100', '100ë¬¸ì œ ë‹¬ì„±', 'ë¬¸ì œ 100ê°œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤', 'ğŸ†'),
            ('all_easy', 'Easy ì •ë³µ', 'ëª¨ë“  Easy ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤', 'âœ¨'),
            ('speed_master', 'ìŠ¤í”¼ë“œ ë§ˆìŠ¤í„°', 'ë¹ ë¥´ê²Œ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤', 'âš¡'),

            # ë¬¸ë²• ë§ˆìŠ¤í„° ì‹œë¦¬ì¦ˆ
            ('syntax_typo_monster', 'íƒ€ì´í•‘ ê´´ë¬¼', 'ë¬¸ë²• ì˜¤ë¥˜ í‰ê·  5-6ê°œ (ì¡°ê¸ˆë§Œ ë”!)', 'ğŸ‘¾'),
            ('syntax_racer', 'ì˜¤íƒ€ ë ˆì´ì„œ', 'ë¬¸ë²• ì˜¤ë¥˜ í‰ê·  3-4ê°œ', 'ğŸƒ'),
            ('syntax_careful', 'ê¼¼ê¼¼ ê°ì •ì‚¬', 'ë¬¸ë²• ì˜¤ë¥˜ í‰ê·  1-2ê°œ', 'ğŸ”'),
            ('syntax_perfect', 'ë¬¸ë²• ë‚˜ì¹˜', 'ë¬¸ë²• ì˜¤ë¥˜ í‰ê·  0ê°œ', 'âœ…'),

            # ì½”ë”© ì‹¤ë ¥ ì‹œë¦¬ì¦ˆ
            ('skill_genius', 'ì½”ë”© ì²œì¬', 'í‰ê·  ì½”ë“œ ìœ ì‚¬ë„ 80% ì´ìƒ', 'ğŸ§ '),
            ('skill_master', 'ì•Œê³ ë¦¬ì¦˜ ë§ˆìŠ¤í„°', 'í‰ê·  ì½”ë“œ ìœ ì‚¬ë„ 60-79%', 'ğŸ“'),
            ('skill_steady', 'ê¾¸ì¤€ëŸ¬', 'í‰ê·  ì½”ë“œ ìœ ì‚¬ë„ 40-59%', 'ğŸ“š'),
            ('skill_newbie', 'ì½”ë”© ìƒˆì‹¹', 'í‰ê·  ì½”ë“œ ìœ ì‚¬ë„ 40% ë¯¸ë§Œ (ì‹œì‘ì´ ë°˜!)', 'ğŸŒ±'),

            # ë…¼ë¦¬ ì‚¬ê³  ì‹œë¦¬ì¦ˆ
            ('logic_action_first', 'ì¼ë‹¨ ê³ ', 'í‰ê·  ë…¼ë¦¬ ì˜¤ë¥˜ 2.5ê°œ ì´ìƒ', 'ğŸš€'),
            ('logic_trial_error', 'ì‹œí–‰ì°©ì˜¤ì˜ ë‹¬ì¸', 'í‰ê·  ë…¼ë¦¬ ì˜¤ë¥˜ 1-2ê°œ', 'ğŸ”§'),
            ('logic_king', 'ë¡œì§ í‚¹', 'í‰ê·  ë…¼ë¦¬ ì˜¤ë¥˜ 1ê°œ ë¯¸ë§Œ', 'ğŸ‘‘'),

            # íŠ¹ìˆ˜ ë°°ì§€
            ('no_hint_10', 'ë…ê³ ë‹¤ì´', '10ê°œ ë¬¸ì œ íŒíŠ¸ ì—†ì´ í•´ê²°', 'ğŸ¦…'),
            ('perfect_coder', 'í¼í™íŠ¸ ì½”ë”', 'ì™„ë²½í•œ ì½”ë“œ ì‘ì„±ì', 'ğŸ’'),
            ('persistence_king', 'ì§‘ë…ì˜ í™”ì‹ ', 'í¬ê¸°í•˜ì§€ ì•ŠëŠ” ì •ì‹ ', 'ğŸ’ª'),
            ('all_rounder', 'ë§ŒëŠ¥ ì—”í„°í…Œì´ë„ˆ', 'ë‹¤ì–‘í•œ ë¶„ì•¼ ì •ë³µ', 'ğŸ­'),
            ('attendance_3days', 'ì¶œì„ì™•', '3ì¼ ì—°ì† ì¶œì„', 'ğŸ“…'),
            ('hello_world', 'í—¬ë¡œ ì›”ë“œ', 'ì²« ì½”ë“œ ì‹¤í–‰', 'ğŸ‘‹'),

            # ìœ ë¨¸ ë°°ì§€
            ('korean_grammar', 'ìœ ì‚¬ í•œêµ­ì¸', 'ë¬¸ë²• ì˜¤ë¥˜ í‰ê·  7ê°œ ì´ìƒ (ì—¬ì „íˆ ë°°ìš°ëŠ” ì¤‘!)', 'ğŸ‡°ğŸ‡·'),
            ('unbreakable', 'ë¶ˆêµ´ì˜ ì˜ì§€', 'í•œ ë¬¸ì œì— 5ë²ˆ ì´ìƒ íŒíŠ¸ ìš”ì²­', 'ğŸ›¡ï¸'),
            ('night_owl', 'ì•¼í–‰ì„±', 'ë°¤ëŠ¦ê²Œ ì½”ë”©í•˜ëŠ” ìŠµê´€', 'ğŸ¦‰'),
            ('hint_collector', 'íŒíŠ¸ ìˆ˜ì§‘ê°€', 'ì´ 30íšŒ ì´ìƒ íŒíŠ¸ ìš”ì²­', 'ğŸ'),
            ('button_mania', 'ë²„íŠ¼ ë§¤ë‹ˆì•„', 'ì‹¤í–‰ ë²„íŠ¼ì„ ë§ì´ ëˆ„ë¦„', 'ğŸ–±ï¸'),
        ]

        created_count = 0
        updated_count = 0

        for badge_type, name, description, icon in badges_data:
            badge, created = Badge.objects.update_or_create(
                badge_type=badge_type,
                defaults={
                    'name': name,
                    'description': description,
                    'icon': icon
                }
            )
            if created:
                created_count += 1
                self.stdout.write(self.style.SUCCESS(f'âœ… Created: {name} ({badge_type})'))
            else:
                updated_count += 1
                self.stdout.write(self.style.WARNING(f'ğŸ”„ Updated: {name} ({badge_type})'))

        self.stdout.write(self.style.SUCCESS(f'\nâœ¨ ì™„ë£Œ: {created_count}ê°œ ìƒì„±, {updated_count}ê°œ ì—…ë°ì´íŠ¸'))
