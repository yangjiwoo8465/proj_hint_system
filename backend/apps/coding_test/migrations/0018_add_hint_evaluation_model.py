# Generated by Django 5.0.1 on 2025-11-28 08:36

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("coding_test", "0017_aimodelconfig_hint_engine_and_more"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AlterField(
            model_name="aimodelconfig",
            name="model_name",
            field=models.CharField(
                choices=[
                    (
                        "meta-llama/Llama-3.2-3B-Instruct",
                        "Llama 3.2 3B Instruct (HuggingFace)",
                    ),
                    (
                        "Qwen/Qwen2.5-Coder-32B-Instruct",
                        "Qwen 2.5 Coder 32B (HuggingFace)",
                    ),
                    (
                        "mistralai/Mistral-7B-Instruct-v0.3",
                        "Mistral 7B Instruct (HuggingFace)",
                    ),
                    ("google/gemma-2-9b-it", "Gemma 2 9B IT (HuggingFace)"),
                    (
                        "ModelCloud/Brumby-14B-Base-GPTQMODEL-W4A16-v2",
                        "Brumby 14B Base (HuggingFace)",
                    ),
                    ("gpt-5.1", "GPT-5.1 (OpenAI 최신)"),
                    ("gpt-4.1", "GPT-4.1 (OpenAI)"),
                    ("o3", "o3 (OpenAI 추론 특화)"),
                    ("gpt-4o", "GPT-4o (OpenAI)"),
                ],
                default="meta-llama/Llama-3.2-3B-Instruct",
                max_length=200,
                verbose_name="모델 이름",
            ),
        ),
        migrations.CreateModel(
            name="HintEvaluation",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "evaluation_type",
                    models.CharField(
                        choices=[("human", "휴먼 평가"), ("llm", "LLM-as-Judge")],
                        default="human",
                        max_length=10,
                        verbose_name="평가 유형",
                    ),
                ),
                ("problem_id", models.CharField(max_length=50, verbose_name="문제 ID")),
                (
                    "problem_title",
                    models.CharField(blank=True, max_length=200, verbose_name="문제 제목"),
                ),
                ("user_code", models.TextField(verbose_name="사용자 코드")),
                ("hint_text", models.TextField(verbose_name="힌트 텍스트")),
                (
                    "hint_level",
                    models.CharField(blank=True, max_length=20, verbose_name="힌트 레벨"),
                ),
                (
                    "hint_purpose",
                    models.CharField(blank=True, max_length=20, verbose_name="힌트 목적"),
                ),
                (
                    "hint_relevance",
                    models.IntegerField(
                        default=0, help_text="1-5점", verbose_name="힌트 관련성"
                    ),
                ),
                (
                    "educational_value",
                    models.IntegerField(
                        default=0, help_text="1-5점", verbose_name="교육적 가치"
                    ),
                ),
                (
                    "difficulty_appropriateness",
                    models.IntegerField(
                        default=0, help_text="1-5점", verbose_name="난이도 적절성"
                    ),
                ),
                (
                    "code_accuracy",
                    models.IntegerField(
                        default=0, help_text="1-5점", verbose_name="코드 정확성"
                    ),
                ),
                (
                    "completeness",
                    models.IntegerField(
                        default=0, help_text="1-5점", verbose_name="완전성"
                    ),
                ),
                ("average_score", models.FloatField(default=0.0, verbose_name="평균 점수")),
                ("feedback", models.JSONField(default=dict, verbose_name="상세 피드백")),
                ("overall_comment", models.TextField(blank=True, verbose_name="종합 의견")),
                (
                    "model_used",
                    models.CharField(
                        blank=True,
                        help_text="LLM 평가 시 사용된 모델",
                        max_length=50,
                        verbose_name="사용 모델",
                    ),
                ),
                (
                    "created_at",
                    models.DateTimeField(auto_now_add=True, verbose_name="평가일"),
                ),
                (
                    "evaluator",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="hint_evaluations",
                        to=settings.AUTH_USER_MODEL,
                        verbose_name="평가자",
                    ),
                ),
                (
                    "hint_request",
                    models.ForeignKey(
                        blank=True,
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="evaluations",
                        to="coding_test.hintrequest",
                        verbose_name="힌트 요청",
                    ),
                ),
            ],
            options={
                "verbose_name": "힌트 평가",
                "verbose_name_plural": "힌트 평가 목록",
                "db_table": "hint_evaluations",
                "ordering": ["-created_at"],
            },
        ),
    ]
